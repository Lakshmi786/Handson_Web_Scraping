<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>handson_web_scraping_notebooks</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="Handson_Web_Scraping_Notebooks_files/libs/clipboard/clipboard.min.js"></script>
<script src="Handson_Web_Scraping_Notebooks_files/libs/quarto-html/quarto.js"></script>
<script src="Handson_Web_Scraping_Notebooks_files/libs/quarto-html/popper.min.js"></script>
<script src="Handson_Web_Scraping_Notebooks_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Handson_Web_Scraping_Notebooks_files/libs/quarto-html/anchor.min.js"></script>
<link href="Handson_Web_Scraping_Notebooks_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Handson_Web_Scraping_Notebooks_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Handson_Web_Scraping_Notebooks_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Handson_Web_Scraping_Notebooks_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Handson_Web_Scraping_Notebooks_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">



<section id="part-1-webscraping-along-with-pipeline" class="level2">
<h2 class="anchored" data-anchor-id="part-1-webscraping-along-with-pipeline">Part 1 : Webscraping along with Pipeline</h2>
<p>Introduction:</p>
<p>Web scraping is an automated process to extract information from the internet. It is a powerful tool that can help businesses and individuals gather useful information from various sources on the internet. The data can be used for various purposes such as market research, sentiment analysis, trend analysis, etc. In this blog, we will discuss why web scraping is necessary and how it can be done using Python.</p>
<p>Motivation:</p>
<p>With the proliferation of the internet and the increasing availability of information online, there is a need for an efficient way to collect and analyze this information. Web scraping offers a solution to this problem by allowing users to extract large amounts of data from the internet quickly and easily. This data can then be used for various purposes such as market research, trend analysis, and competitor analysis, to name a few.</p>
<p>Why we need webscraping?</p>
<p>Web scraping is essential because it allows us to collect and analyze data that is not readily available in a structured format. It helps us in understanding market trends, product reviews, and pricing strategies. It also enables us to gather data that can help us gain a competitive advantage in the market. Web scraping can be used for a wide range of applications such as e-commerce, data analysis, and sentiment analysis.</p>
<p>For example, imagine you own an online clothing store and want to monitor the prices of a popular competitor’s clothing items. You could use a web scraper to extract the prices of those items from their website and store the data in a spreadsheet. Then, you could set up an automated notification to alert you when a price drops below a certain threshold. This would give you a competitive advantage by allowing you to adjust your prices accordingly.</p>
<p>In this way, web scraping can save you time, help you make more informed decisions, and give you a leg up on the competition.</p>
<p>Example of the webscraping using below code:</p>
<p>The following code is an example of how web scraping can be done using Python. The code scrapes a webpage and extracts all the tables from the webpage using BeautifulSoup. It then extracts the country sex ratios from the tables and cleans the data to retrieve ISO country codes from a GitHub repository.</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> urllib3</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> List, Tuple</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_webpage_tables(url: <span class="bu">str</span>) <span class="op">-&gt;</span> List[BeautifulSoup]:</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co">    Downloads a webpage from the given url and extracts all the tables using BeautifulSoup.</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters:</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co">        url (str): The url of the webpage to download.</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="co">        List[BeautifulSoup]: A list of BeautifulSoup objects, one for each table on the webpage.</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    http <span class="op">=</span> urllib3.PoolManager()</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> http.request(<span class="st">"GET"</span>, url)</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    soup <span class="op">=</span> BeautifulSoup(response.data, features<span class="op">=</span><span class="st">"html.parser"</span>)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    tables <span class="op">=</span> soup.find_all(<span class="st">'table'</span>)</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> tables</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> process_num(num: <span class="bu">str</span>) :</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="co">    Processes a string representing a number to a float.</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters:</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="co">        num (str): A string representing a number.</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="co">        Union[float, str]: The float representation of the input string, or the original string if it cannot be converted.</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">float</span>(re.sub(<span class="vs">r'[^\d.-]'</span>, <span class="st">''</span>, num))</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">ValueError</span>:</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> num</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> is_valid_cell(cells: List[BeautifulSoup]) <span class="op">-&gt;</span> <span class="bu">bool</span>:</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a><span class="co">    Determines if a list of BeautifulSoup objects representing table cells is valid.</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a><span class="co">    A cell is considered invalid if its text content is 'N/A'.</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters:</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a><span class="co">        cells (List[BeautifulSoup]): A list of BeautifulSoup objects representing table cells.</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a><span class="co">        bool: True if all the cells are valid, False otherwise.</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">all</span>(cell.text.strip() <span class="op">!=</span> <span class="st">'N/A'</span> <span class="cf">for</span> cell <span class="kw">in</span> cells)</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> make_str_valid(s: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a><span class="co">    Makes a string valid by removing any text in parentheses.</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters:</span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a><span class="co">        s (str): The string to make valid.</span></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a><span class="co">        str: The input string with any text in parentheses removed.</span></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>    ind_delim <span class="op">=</span> s.find(<span class="st">'('</span>)</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> ind_delim <span class="op">!=</span> <span class="op">-</span><span class="dv">1</span>:</span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>        wrd <span class="op">=</span> s[:ind_delim<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>        wrd <span class="op">=</span> s</span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> wrd</span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> extract_country_sex_ratio(tables: List[BeautifulSoup]) <span class="op">-&gt;</span> pd.DataFrame:</span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a><span class="co">    Extracts country sex ratios from a list of BeautifulSoup tables.</span></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters:</span></span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a><span class="co">        tables (List[BeautifulSoup]): A list of BeautifulSoup tables.</span></span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a><span class="co">        pd.DataFrame: A pandas DataFrame containing the extracted country sex ratio data.</span></span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> []</span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> table <span class="kw">in</span> tables:</span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a>        rows <span class="op">=</span> table.find_all(<span class="st">'tr'</span>)</span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> row <span class="kw">in</span> rows:</span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a>            cells <span class="op">=</span> row.find_all(<span class="st">'td'</span>)</span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="bu">len</span>(cells) <span class="op">&gt;</span> <span class="dv">1</span> <span class="kw">and</span> is_valid_cell(cells):</span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a>                country <span class="op">=</span> make_str_valid(cells[<span class="dv">0</span>].text.strip())</span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a>                sex_ratio <span class="op">=</span> process_num(cells[<span class="op">-</span><span class="dv">1</span>].text.strip())</span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a>                data.append([country, sex_ratio])</span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.DataFrame(data, columns<span class="op">=</span>[<span class="st">'Country'</span>, <span class="st">'Sex-Ratio'</span>])</span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_country_codes(df) <span class="op">-&gt;</span>  pd.DataFrame:</span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a><span class="co">    Retrieves ISO country codes from a GitHub repository and returns a cleaned DataFrame</span></span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a>    country_raw <span class="op">=</span> pd.read_csv(<span class="st">'https://raw.githubusercontent.com/lukes/ISO-3166-Countries-with-Regional-Codes/master/all/all.csv'</span>)</span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a>    df_c <span class="op">=</span> country_raw.iloc[:, [<span class="dv">0</span>,<span class="dv">2</span>]]</span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a>    df_c <span class="op">=</span> df_c.rename(columns<span class="op">=</span>{<span class="st">'name'</span>:<span class="st">'Country'</span>, <span class="st">'alpha-3'</span>:<span class="st">'ISO-code'</span>})</span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a>    df_c <span class="op">=</span> df_c.drop_duplicates(subset<span class="op">=</span>[<span class="st">'Country'</span>], keep<span class="op">=</span><span class="st">'last'</span>).dropna()</span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Manually modify some of the country names to match the names in the main DataFrame</span></span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a>    df_c.at[df_c[df_c[<span class="st">'Country'</span>]<span class="op">==</span><span class="st">'Viet Nam'</span>].index.values[<span class="dv">0</span>], <span class="st">'Country'</span>] <span class="op">=</span> <span class="st">'Vietnam'</span></span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a>    df_c.at[df_c[df_c[<span class="st">'Country'</span>]<span class="op">==</span><span class="st">'United States of America'</span>].index.values[<span class="dv">0</span>], <span class="st">'Country'</span>] <span class="op">=</span> <span class="st">'United States'</span></span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a>    df_c.at[df_c[df_c[<span class="st">'Country'</span>]<span class="op">==</span><span class="st">'Iran (Islamic Republic of)'</span>].index.values[<span class="dv">0</span>], <span class="st">'Country'</span>] <span class="op">=</span> <span class="st">'Iran'</span></span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a>    df_c.at[df_c[df_c[<span class="st">'Country'</span>]<span class="op">==</span><span class="st">'Russian Federation'</span>].index.values[<span class="dv">0</span>], <span class="st">'Country'</span>] <span class="op">=</span> <span class="st">'Russia'</span></span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a>    df_c.at[df_c[df_c[<span class="st">'Country'</span>]<span class="op">==</span><span class="st">'United Kingdom of Great Britain and Northern Ireland'</span>].index.values[<span class="dv">0</span>], <span class="st">'Country'</span>] <span class="op">=</span> <span class="st">'United Kingdom'</span></span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a>    df_c.at[df_c[df_c[<span class="st">'Country'</span>]<span class="op">==</span><span class="st">'Venezuela (Bolivarian Republic of)'</span>].index.values[<span class="dv">0</span>], <span class="st">'Country'</span>] <span class="op">=</span> <span class="st">'Venezuela'</span></span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a>    df_c.at[df_c[df_c[<span class="st">'Country'</span>]<span class="op">==</span><span class="st">"Korea (Democratic People's Republic of)"</span>].index.values[<span class="dv">0</span>], <span class="st">'Country'</span>] <span class="op">=</span> <span class="st">'Korea, North'</span></span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a>    df_c.at[ df_c[df_c[<span class="st">'Country'</span>]<span class="op">==</span><span class="st">'Korea, Republic of'</span>].index.values[<span class="dv">0</span>], <span class="st">'Country'</span> ] <span class="op">=</span> <span class="st">'Korea, South'</span></span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a>    df_c.at[ df_c[df_c[<span class="st">'Country'</span>]<span class="op">==</span><span class="st">'Bolivia (Plurinational State of)'</span>].index.values[<span class="dv">0</span>], <span class="st">'Country'</span> ] <span class="op">=</span> <span class="st">'Bolivia'</span></span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a>    df_c.at[ df_c[df_c[<span class="st">'Country'</span>]<span class="op">==</span><span class="st">'Côte d</span><span class="ch">\'</span><span class="st">Ivoire'</span>].index.values[<span class="dv">0</span>], <span class="st">'Country'</span> ] <span class="op">=</span> <span class="st">'Ivory Coast'</span></span>
<span id="cb1-123"><a href="#cb1-123" aria-hidden="true" tabindex="-1"></a>    df_c.at[ df_c[df_c[<span class="st">'Country'</span>]<span class="op">==</span><span class="st">'Congo'</span>].index.values[<span class="dv">0</span>], <span class="st">'Country'</span> ] <span class="op">=</span> <span class="st">'Congo, Republic of the'</span></span>
<span id="cb1-124"><a href="#cb1-124" aria-hidden="true" tabindex="-1"></a>    df_c.at[ df_c[df_c[<span class="st">'Country'</span>]<span class="op">==</span><span class="st">'Tanzania, United Republic of'</span>].index.values[<span class="dv">0</span>], <span class="st">'Country'</span> ] <span class="op">=</span> <span class="st">'Tanzania'</span></span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Using the ISO-3166 coding standard to map countries</span></span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'ISO-code'</span>] <span class="op">=</span> df[<span class="st">'Country'</span>].<span class="bu">map</span>(df_c.set_index(<span class="st">'Country'</span>)[<span class="st">'ISO-code'</span>])</span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Clean data-frame ( Duplicates &amp; NaNs )</span></span>
<span id="cb1-128"><a href="#cb1-128" aria-hidden="true" tabindex="-1"></a>    df.isna().<span class="bu">sum</span>() </span>
<span id="cb1-129"><a href="#cb1-129" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df.dropna()</span>
<span id="cb1-130"><a href="#cb1-130" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-outputid="27c7635e-1def-428a-a933-342bd3f3e942" data-execution_count="5">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.pipeline <span class="im">import</span> Pipeline</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> FunctionTransformer</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">'https://en.wikipedia.org/wiki/List_of_countries_by_sex_ratio'</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># define pipeline</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>pipeline <span class="op">=</span> Pipeline([</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'get_tables'</span>, FunctionTransformer(get_webpage_tables)),</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'extract_ratio'</span>, FunctionTransformer(extract_country_sex_ratio)),</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'get_codes'</span>, FunctionTransformer(get_country_codes))</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="co"># apply pipeline to input URL</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pipeline.transform(url)</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/usr/local/lib/python3.8/dist-packages/urllib3/connectionpool.py:842: InsecureRequestWarning:

Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/latest/advanced-usage.html#ssl-warnings
</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="5">


  <div id="df-d2705408-be55-4a33-8072-9c6552a5e357">
    <div class="colab-df-container">
      <div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Country</th>
      <th>Sex-Ratio</th>
      <th>ISO-code</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>Afghanistan</td>
      <td>1.03</td>
      <td>AFG</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Albania</td>
      <td>0.98</td>
      <td>ALB</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Algeria</td>
      <td>1.03</td>
      <td>DZA</td>
    </tr>
    <tr>
      <th>4</th>
      <td>American Samoa</td>
      <td>1.0</td>
      <td>ASM</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Andorra</td>
      <td>1.06</td>
      <td>AND</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>225</th>
      <td>Wallis and Futuna</td>
      <td>1.04</td>
      <td>WLF</td>
    </tr>
    <tr>
      <th>227</th>
      <td>Western Sahara</td>
      <td>0.99</td>
      <td>ESH</td>
    </tr>
    <tr>
      <th>228</th>
      <td>Yemen</td>
      <td>1.02</td>
      <td>YEM</td>
    </tr>
    <tr>
      <th>229</th>
      <td>Zambia</td>
      <td>1.0</td>
      <td>ZMB</td>
    </tr>
    <tr>
      <th>230</th>
      <td>Zimbabwe</td>
      <td>0.96</td>
      <td>ZWE</td>
    </tr>
  </tbody>
</table>
<p>209 rows × 3 columns</p>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-d2705408-be55-4a33-8072-9c6552a5e357')" title="Convert this dataframe to an interactive table." style="display:none;">
        
  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewbox="0 0 24 24" width="24px">
    <path d="M0 0h24v24H0V0z" fill="none"></path>
    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"></path><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"></path>
  </svg>
      </button>
      
  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

      <script>
        const buttonEl =
          document.querySelector('#df-d2705408-be55-4a33-8072-9c6552a5e357 button.colab-df-convert');
        buttonEl.style.display =
          google.colab.kernel.accessAllowed ? 'block' : 'none';

        async function convertToInteractive(key) {
          const element = document.querySelector('#df-d2705408-be55-4a33-8072-9c6552a5e357');
          const dataTable =
            await google.colab.kernel.invokeFunction('convertToInteractive',
                                                     [key], {});
          if (!dataTable) return;

          const docLinkHtml = 'Like what you see? Visit the ' +
            '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
            + ' to learn more about interactive tables.';
          element.innerHTML = '';
          dataTable['output_type'] = 'display_data';
          await google.colab.output.renderOutput(dataTable, element);
          const docLink = document.createElement('div');
          docLink.innerHTML = docLinkHtml;
          element.appendChild(docLink);
        }
      </script>
    </div>
  </div>
  
</div>
</div>
<div class="cell" data-outputid="9b77a9e2-bf74-4803-aee4-b0641107e6d6" data-execution_count="3">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>thres <span class="op">=</span> <span class="fl">1.3</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>df_th <span class="op">=</span> df.drop(df[ df[<span class="st">'Sex-Ratio'</span>] <span class="op">&gt;</span> thres ].index)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co"># color pallete @ https://plotly.com/python/builtin-colorscales/</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.choropleth(df_th, locations<span class="op">=</span><span class="st">'ISO-code'</span>,</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>                color<span class="op">=</span><span class="st">"Sex-Ratio"</span>, hover_name<span class="op">=</span><span class="st">"Country"</span>,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>                    color_continuous_scale<span class="op">=</span>px.colors.sequential.Sunset, projection<span class="op">=</span><span class="st">"natural earth"</span>)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>fig.update_layout(title<span class="op">=</span>{<span class="st">'text'</span>:<span class="st">'Sex-Ratio per country'</span>, <span class="st">'y'</span>:<span class="fl">0.95</span>, <span class="st">'x'</span>:<span class="fl">0.5</span>, <span class="st">'xanchor'</span>:<span class="st">'center'</span>, <span class="st">'yanchor'</span>:<span class="st">'top'</span>})</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">


<meta charset="utf-8">

    <div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax) {MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script src="https://cdn.plot.ly/plotly-2.8.3.min.js"></script>                <div id="fc1880af-cf8b-4fab-9711-33a66f633479" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("fc1880af-cf8b-4fab-9711-33a66f633479")) {                    Plotly.newPlot(                        "fc1880af-cf8b-4fab-9711-33a66f633479",                        [{"colorscale":[[0.0,"#636efa"],[1.0,"#636efa"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=1.03<br>ISO-code=%{location}<extra></extra>","hovertext":["Afghanistan","Algeria","Fiji","Grenada","Iran","Malaysia","Marshall Islands","Trinidad and Tobago"],"locations":["AFG","DZA","FJI","GRD","IRN","MYS","MHL","TTO"],"name":"1.03","showlegend":true,"showscale":false,"z":[1,1,1,1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#EF553B"],[1.0,"#EF553B"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.98<br>ISO-code=%{location}<extra></extra>","hovertext":["Albania","Argentina","Bolivia","Canada","Chad","Colombia","Haiti","Jamaica","Lesotho","Malawi","Netherlands","Niger","South Africa","Spain","Switzerland","Togo","Turkmenistan","Tuvalu"],"locations":["ALB","ARG","BOL","CAN","TCD","COL","HTI","JAM","LSO","MWI","NLD","NER","ZAF","ESP","CHE","TGO","TKM","TUV"],"name":"0.98","showlegend":true,"showscale":false,"z":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#00cc96"],[1.0,"#00cc96"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=1.0<br>ISO-code=%{location}<extra></extra>","hovertext":["American Samoa","Azerbaijan","Belize","Congo, Democratic Republic of the","Costa Rica","Equatorial Guinea","Ethiopia","Guinea","Iceland","Indonesia","Ireland","Isle of Man","Kenya","Lebanon","Liberia","Madagascar","Montserrat","Morocco","New Caledonia","New Zealand","Paraguay","Saint Kitts and Nevis","Sao Tome and Principe","Slovenia","Sweden","Tanzania","Timor-Leste","Zambia"],"locations":["ASM","AZE","BLZ","COD","CRI","GNQ","ETH","GIN","ISL","IDN","IRL","IMN","KEN","LBN","LBR","MDG","MSR","MAR","NCL","NZL","PRY","KNA","STP","SVN","SWE","TZA","TLS","ZMB"],"name":"1.0","showlegend":true,"showscale":false,"z":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#ab63fa"],[1.0,"#ab63fa"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=1.06<br>ISO-code=%{location}<extra></extra>","hovertext":["Andorra","China","Cook Islands","Guam","South Sudan"],"locations":["AND","CHN","COK","GUM","SSD"],"name":"1.06","showlegend":true,"showscale":false,"z":[1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#FFA15A"],[1.0,"#FFA15A"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.95<br>ISO-code=%{location}<extra></extra>","hovertext":["Angola","Armenia","Bosnia and Herzegovina","Bulgaria","Cambodia","Cayman Islands","Greece","Guinea-Bissau","Honduras","Korea, North","Mali","Mongolia","Nicaragua","Romania","Saint Lucia","Serbia","Sierra Leone","Sri Lanka"],"locations":["AGO","ARM","BIH","BGR","KHM","CYM","GRC","GNB","HND","PRK","MLI","MNG","NIC","ROU","LCA","SRB","SLE","LKA"],"name":"0.95","showlegend":true,"showscale":false,"z":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#19d3f3"],[1.0,"#19d3f3"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.9<br>ISO-code=%{location}<extra></extra>","hovertext":["Anguilla","Aruba","Eswatini","Portugal","Puerto Rico"],"locations":["AIA","ABW","SWZ","PRT","PRI"],"name":"0.9","showlegend":true,"showscale":false,"z":[1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#FF6692"],[1.0,"#FF6692"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.89<br>ISO-code=%{location}<extra></extra>","hovertext":["Antigua and Barbuda"],"locations":["ATG"],"name":"0.89","showlegend":true,"showscale":false,"z":[1],"type":"choropleth"},{"colorscale":[[0.0,"#B6E880"],[1.0,"#B6E880"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.99<br>ISO-code=%{location}<extra></extra>","hovertext":["Australia","Burundi","Cameroon","Central African Republic","Cuba","Denmark","Ecuador","Guatemala","Guernsey","Liechtenstein","North Macedonia","Tajikistan","Tunisia","United Kingdom","Uzbekistan","Vanuatu","Venezuela","Western Sahara"],"locations":["AUS","BDI","CMR","CAF","CUB","DNK","ECU","GTM","GGY","LIE","MKD","TJK","TUN","GBR","UZB","VUT","VEN","ESH"],"name":"0.99","showlegend":true,"showscale":false,"z":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#FF97FF"],[1.0,"#FF97FF"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.96<br>ISO-code=%{location}<extra></extra>","hovertext":["Austria","Burkina Faso","France","Germany","Kyrgyzstan","Mauritius","Mexico","Namibia","Nepal","Peru","Rwanda","Singapore","Thailand","Zimbabwe"],"locations":["AUT","BFA","FRA","DEU","KGZ","MUS","MEX","NAM","NPL","PER","RWA","SGP","THA","ZWE"],"name":"0.96","showlegend":true,"showscale":false,"z":[1,1,1,1,1,1,1,1,1,1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#FECB52"],[1.0,"#FECB52"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.97<br>ISO-code=%{location}<extra></extra>","hovertext":["Bangladesh","Belgium","Benin","Brazil","Chile","Czechia","Eritrea","Finland","Ghana","Jersey","Montenegro","Mozambique","Myanmar","United States"],"locations":["BGD","BEL","BEN","BRA","CHL","CZE","ERI","FIN","GHA","JEY","MNE","MOZ","MMR","USA"],"name":"0.97","showlegend":true,"showscale":false,"z":[1,1,1,1,1,1,1,1,1,1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#636efa"],[1.0,"#636efa"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.94<br>ISO-code=%{location}<extra></extra>","hovertext":["Barbados","Bermuda","Comoros","Japan","Kiribati","Monaco","Poland","Saint Pierre and Miquelon","San Marino","Senegal","Slovakia","Uganda","Uruguay"],"locations":["BRB","BMU","COM","JPN","KIR","MCO","POL","SPM","SMR","SEN","SVK","UGA","URY"],"name":"0.94","showlegend":true,"showscale":false,"z":[1,1,1,1,1,1,1,1,1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#EF553B"],[1.0,"#EF553B"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.87<br>ISO-code=%{location}<extra></extra>","hovertext":["Belarus"],"locations":["BLR"],"name":"0.87","showlegend":true,"showscale":false,"z":[1],"type":"choropleth"},{"colorscale":[[0.0,"#00cc96"],[1.0,"#00cc96"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=1.08<br>ISO-code=%{location}<extra></extra>","hovertext":["Bhutan","Faroe Islands","Gabon","Greenland","India"],"locations":["BTN","FRO","GAB","GRL","IND"],"name":"1.08","showlegend":true,"showscale":false,"z":[1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#ab63fa"],[1.0,"#ab63fa"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.93<br>ISO-code=%{location}<extra></extra>","hovertext":["Botswana","Croatia","Italy","Mauritania"],"locations":["BWA","HRV","ITA","MRT"],"name":"0.93","showlegend":true,"showscale":false,"z":[1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#FFA15A"],[1.0,"#FFA15A"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=1.01<br>ISO-code=%{location}<extra></extra>","hovertext":["Congo, Republic of the","Gibraltar","Iraq","Israel","Ivory Coast","Korea, South","Malta","Panama","Philippines","Saint Helena, Ascension and Tristan da Cunha","Sudan","Suriname","Tonga","Turkey","Turks and Caicos Islands","Vietnam"],"locations":["COG","GIB","IRQ","ISR","CIV","KOR","MLT","PAN","PHL","SHN","SDN","SUR","TON","TUR","TCA","VNM"],"name":"1.01","showlegend":true,"showscale":false,"z":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#19d3f3"],[1.0,"#19d3f3"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=1.05<br>ISO-code=%{location}<extra></extra>","hovertext":["Cyprus","Egypt","French Polynesia","Libya"],"locations":["CYP","EGY","PYF","LBY"],"name":"1.05","showlegend":true,"showscale":false,"z":[1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#FF6692"],[1.0,"#FF6692"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.83<br>ISO-code=%{location}<extra></extra>","hovertext":["Djibouti"],"locations":["DJI"],"name":"0.83","showlegend":true,"showscale":false,"z":[1],"type":"choropleth"},{"colorscale":[[0.0,"#B6E880"],[1.0,"#B6E880"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=1.02<br>ISO-code=%{location}<extra></extra>","hovertext":["Dominica","Dominican Republic","Guyana","Luxembourg","Nigeria","Norway","Somalia","Yemen"],"locations":["DMA","DOM","GUY","LUX","NGA","NOR","SOM","YEM"],"name":"1.02","showlegend":true,"showscale":false,"z":[1,1,1,1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#FF97FF"],[1.0,"#FF97FF"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.92<br>ISO-code=%{location}<extra></extra>","hovertext":["El Salvador","Georgia"],"locations":["SLV","GEO"],"name":"0.92","showlegend":true,"showscale":false,"z":[1,1],"type":"choropleth"},{"colorscale":[[0.0,"#FECB52"],[1.0,"#FECB52"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.88<br>ISO-code=%{location}<extra></extra>","hovertext":["Estonia","Nauru"],"locations":["EST","NRU"],"name":"0.88","showlegend":true,"showscale":false,"z":[1,1],"type":"choropleth"},{"colorscale":[[0.0,"#636efa"],[1.0,"#636efa"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.86<br>ISO-code=%{location}<extra></extra>","hovertext":["Hong Kong","Latvia","Lithuania","Russia","Ukraine"],"locations":["HKG","LVA","LTU","RUS","UKR"],"name":"0.86","showlegend":true,"showscale":false,"z":[1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#EF553B"],[1.0,"#EF553B"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.91<br>ISO-code=%{location}<extra></extra>","hovertext":["Hungary","Kazakhstan"],"locations":["HUN","KAZ"],"name":"0.91","showlegend":true,"showscale":false,"z":[1,1],"type":"choropleth"},{"colorscale":[[0.0,"#00cc96"],[1.0,"#00cc96"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=1.11<br>ISO-code=%{location}<extra></extra>","hovertext":["Jordan"],"locations":["JOR"],"name":"1.11","showlegend":true,"showscale":false,"z":[1],"type":"choropleth"},{"colorscale":[[0.0,"#ab63fa"],[1.0,"#ab63fa"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=1.13<br>ISO-code=%{location}<extra></extra>","hovertext":["Maldives","Northern Mariana Islands"],"locations":["MDV","MNP"],"name":"1.13","showlegend":true,"showscale":false,"z":[1,1],"type":"choropleth"},{"colorscale":[[0.0,"#FFA15A"],[1.0,"#FFA15A"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=1.18<br>ISO-code=%{location}<extra></extra>","hovertext":["Oman"],"locations":["OMN"],"name":"1.18","showlegend":true,"showscale":false,"z":[1],"type":"choropleth"},{"colorscale":[[0.0,"#19d3f3"],[1.0,"#19d3f3"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=1.04<br>ISO-code=%{location}<extra></extra>","hovertext":["Pakistan","Papua New Guinea","Saint Vincent and the Grenadines","Samoa","Solomon Islands","Wallis and Futuna"],"locations":["PAK","PNG","VCT","WSM","SLB","WLF"],"name":"1.04","showlegend":true,"showscale":false,"z":[1,1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#FF6692"],[1.0,"#FF6692"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=1.07<br>ISO-code=%{location}<extra></extra>","hovertext":["Palau","Seychelles"],"locations":["PLW","SYC"],"name":"1.07","showlegend":true,"showscale":false,"z":[1,1],"type":"choropleth"},{"colorscale":[[0.0,"#B6E880"],[1.0,"#B6E880"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=1.3<br>ISO-code=%{location}<extra></extra>","hovertext":["Saudi Arabia"],"locations":["SAU"],"name":"1.3","showlegend":true,"showscale":false,"z":[1],"type":"choropleth"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"geo":{"domain":{"x":[0.0,1.0],"y":[0.0,1.0]},"projection":{"type":"natural earth"},"center":{}},"legend":{"title":{"text":"Sex-Ratio"},"tracegroupgap":0},"margin":{"t":60},"title":{"text":"Sex-Ratio per country","y":0.95,"x":0.5,"xanchor":"center","yanchor":"top"}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('fc1880af-cf8b-4fab-9711-33a66f633479');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                            </script>        </div>


</div>
</div>
<div class="cell" data-outputid="4302ad30-00f4-43b8-f24d-24f546aaca8d" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>thres <span class="op">=</span> <span class="fl">1.3</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>df_th <span class="op">=</span> df.drop(df[ df[<span class="st">'Sex-Ratio'</span>] <span class="op">&gt;</span> thres ].index)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co"># color pallete @ https://plotly.com/python/builtin-colorscales/</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.choropleth(df_th, locations<span class="op">=</span><span class="st">'ISO-code'</span>,</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>                color<span class="op">=</span><span class="st">"Sex-Ratio"</span>, hover_name<span class="op">=</span><span class="st">"Country"</span>,</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>                    color_continuous_scale<span class="op">=</span>px.colors.sequential.Sunset, projection<span class="op">=</span><span class="st">"orthographic"</span>)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>fig.update_layout(title<span class="op">=</span>{<span class="st">'text'</span>:<span class="st">'Sex-Ratio per country'</span>, <span class="st">'y'</span>:<span class="fl">0.95</span>, <span class="st">'x'</span>:<span class="fl">0.5</span>, <span class="st">'xanchor'</span>:<span class="st">'center'</span>, <span class="st">'yanchor'</span>:<span class="st">'top'</span>})</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">


<meta charset="utf-8">

    <div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax) {MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script src="https://cdn.plot.ly/plotly-2.8.3.min.js"></script>                <div id="0c31d511-6455-41ed-b031-3db95bfc0464" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("0c31d511-6455-41ed-b031-3db95bfc0464")) {                    Plotly.newPlot(                        "0c31d511-6455-41ed-b031-3db95bfc0464",                        [{"colorscale":[[0.0,"#636efa"],[1.0,"#636efa"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=1.03<br>ISO-code=%{location}<extra></extra>","hovertext":["Afghanistan","Algeria","Fiji","Grenada","Iran","Malaysia","Marshall Islands","Trinidad and Tobago"],"locations":["AFG","DZA","FJI","GRD","IRN","MYS","MHL","TTO"],"name":"1.03","showlegend":true,"showscale":false,"z":[1,1,1,1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#EF553B"],[1.0,"#EF553B"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.98<br>ISO-code=%{location}<extra></extra>","hovertext":["Albania","Argentina","Bolivia","Canada","Chad","Colombia","Haiti","Jamaica","Lesotho","Malawi","Netherlands","Niger","South Africa","Spain","Switzerland","Togo","Turkmenistan","Tuvalu"],"locations":["ALB","ARG","BOL","CAN","TCD","COL","HTI","JAM","LSO","MWI","NLD","NER","ZAF","ESP","CHE","TGO","TKM","TUV"],"name":"0.98","showlegend":true,"showscale":false,"z":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#00cc96"],[1.0,"#00cc96"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=1.0<br>ISO-code=%{location}<extra></extra>","hovertext":["American Samoa","Azerbaijan","Belize","Congo, Democratic Republic of the","Costa Rica","Equatorial Guinea","Ethiopia","Guinea","Iceland","Indonesia","Ireland","Isle of Man","Kenya","Lebanon","Liberia","Madagascar","Montserrat","Morocco","New Caledonia","New Zealand","Paraguay","Saint Kitts and Nevis","Sao Tome and Principe","Slovenia","Sweden","Tanzania","Timor-Leste","Zambia"],"locations":["ASM","AZE","BLZ","COD","CRI","GNQ","ETH","GIN","ISL","IDN","IRL","IMN","KEN","LBN","LBR","MDG","MSR","MAR","NCL","NZL","PRY","KNA","STP","SVN","SWE","TZA","TLS","ZMB"],"name":"1.0","showlegend":true,"showscale":false,"z":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#ab63fa"],[1.0,"#ab63fa"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=1.06<br>ISO-code=%{location}<extra></extra>","hovertext":["Andorra","China","Cook Islands","Guam","South Sudan"],"locations":["AND","CHN","COK","GUM","SSD"],"name":"1.06","showlegend":true,"showscale":false,"z":[1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#FFA15A"],[1.0,"#FFA15A"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.95<br>ISO-code=%{location}<extra></extra>","hovertext":["Angola","Armenia","Bosnia and Herzegovina","Bulgaria","Cambodia","Cayman Islands","Greece","Guinea-Bissau","Honduras","Korea, North","Mali","Mongolia","Nicaragua","Romania","Saint Lucia","Serbia","Sierra Leone","Sri Lanka"],"locations":["AGO","ARM","BIH","BGR","KHM","CYM","GRC","GNB","HND","PRK","MLI","MNG","NIC","ROU","LCA","SRB","SLE","LKA"],"name":"0.95","showlegend":true,"showscale":false,"z":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#19d3f3"],[1.0,"#19d3f3"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.9<br>ISO-code=%{location}<extra></extra>","hovertext":["Anguilla","Aruba","Eswatini","Portugal","Puerto Rico"],"locations":["AIA","ABW","SWZ","PRT","PRI"],"name":"0.9","showlegend":true,"showscale":false,"z":[1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#FF6692"],[1.0,"#FF6692"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.89<br>ISO-code=%{location}<extra></extra>","hovertext":["Antigua and Barbuda"],"locations":["ATG"],"name":"0.89","showlegend":true,"showscale":false,"z":[1],"type":"choropleth"},{"colorscale":[[0.0,"#B6E880"],[1.0,"#B6E880"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.99<br>ISO-code=%{location}<extra></extra>","hovertext":["Australia","Burundi","Cameroon","Central African Republic","Cuba","Denmark","Ecuador","Guatemala","Guernsey","Liechtenstein","North Macedonia","Tajikistan","Tunisia","United Kingdom","Uzbekistan","Vanuatu","Venezuela","Western Sahara"],"locations":["AUS","BDI","CMR","CAF","CUB","DNK","ECU","GTM","GGY","LIE","MKD","TJK","TUN","GBR","UZB","VUT","VEN","ESH"],"name":"0.99","showlegend":true,"showscale":false,"z":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#FF97FF"],[1.0,"#FF97FF"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.96<br>ISO-code=%{location}<extra></extra>","hovertext":["Austria","Burkina Faso","France","Germany","Kyrgyzstan","Mauritius","Mexico","Namibia","Nepal","Peru","Rwanda","Singapore","Thailand","Zimbabwe"],"locations":["AUT","BFA","FRA","DEU","KGZ","MUS","MEX","NAM","NPL","PER","RWA","SGP","THA","ZWE"],"name":"0.96","showlegend":true,"showscale":false,"z":[1,1,1,1,1,1,1,1,1,1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#FECB52"],[1.0,"#FECB52"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.97<br>ISO-code=%{location}<extra></extra>","hovertext":["Bangladesh","Belgium","Benin","Brazil","Chile","Czechia","Eritrea","Finland","Ghana","Jersey","Montenegro","Mozambique","Myanmar","United States"],"locations":["BGD","BEL","BEN","BRA","CHL","CZE","ERI","FIN","GHA","JEY","MNE","MOZ","MMR","USA"],"name":"0.97","showlegend":true,"showscale":false,"z":[1,1,1,1,1,1,1,1,1,1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#636efa"],[1.0,"#636efa"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.94<br>ISO-code=%{location}<extra></extra>","hovertext":["Barbados","Bermuda","Comoros","Japan","Kiribati","Monaco","Poland","Saint Pierre and Miquelon","San Marino","Senegal","Slovakia","Uganda","Uruguay"],"locations":["BRB","BMU","COM","JPN","KIR","MCO","POL","SPM","SMR","SEN","SVK","UGA","URY"],"name":"0.94","showlegend":true,"showscale":false,"z":[1,1,1,1,1,1,1,1,1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#EF553B"],[1.0,"#EF553B"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.87<br>ISO-code=%{location}<extra></extra>","hovertext":["Belarus"],"locations":["BLR"],"name":"0.87","showlegend":true,"showscale":false,"z":[1],"type":"choropleth"},{"colorscale":[[0.0,"#00cc96"],[1.0,"#00cc96"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=1.08<br>ISO-code=%{location}<extra></extra>","hovertext":["Bhutan","Faroe Islands","Gabon","Greenland","India"],"locations":["BTN","FRO","GAB","GRL","IND"],"name":"1.08","showlegend":true,"showscale":false,"z":[1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#ab63fa"],[1.0,"#ab63fa"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.93<br>ISO-code=%{location}<extra></extra>","hovertext":["Botswana","Croatia","Italy","Mauritania"],"locations":["BWA","HRV","ITA","MRT"],"name":"0.93","showlegend":true,"showscale":false,"z":[1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#FFA15A"],[1.0,"#FFA15A"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=1.01<br>ISO-code=%{location}<extra></extra>","hovertext":["Congo, Republic of the","Gibraltar","Iraq","Israel","Ivory Coast","Korea, South","Malta","Panama","Philippines","Saint Helena, Ascension and Tristan da Cunha","Sudan","Suriname","Tonga","Turkey","Turks and Caicos Islands","Vietnam"],"locations":["COG","GIB","IRQ","ISR","CIV","KOR","MLT","PAN","PHL","SHN","SDN","SUR","TON","TUR","TCA","VNM"],"name":"1.01","showlegend":true,"showscale":false,"z":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#19d3f3"],[1.0,"#19d3f3"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=1.05<br>ISO-code=%{location}<extra></extra>","hovertext":["Cyprus","Egypt","French Polynesia","Libya"],"locations":["CYP","EGY","PYF","LBY"],"name":"1.05","showlegend":true,"showscale":false,"z":[1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#FF6692"],[1.0,"#FF6692"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.83<br>ISO-code=%{location}<extra></extra>","hovertext":["Djibouti"],"locations":["DJI"],"name":"0.83","showlegend":true,"showscale":false,"z":[1],"type":"choropleth"},{"colorscale":[[0.0,"#B6E880"],[1.0,"#B6E880"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=1.02<br>ISO-code=%{location}<extra></extra>","hovertext":["Dominica","Dominican Republic","Guyana","Luxembourg","Nigeria","Norway","Somalia","Yemen"],"locations":["DMA","DOM","GUY","LUX","NGA","NOR","SOM","YEM"],"name":"1.02","showlegend":true,"showscale":false,"z":[1,1,1,1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#FF97FF"],[1.0,"#FF97FF"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.92<br>ISO-code=%{location}<extra></extra>","hovertext":["El Salvador","Georgia"],"locations":["SLV","GEO"],"name":"0.92","showlegend":true,"showscale":false,"z":[1,1],"type":"choropleth"},{"colorscale":[[0.0,"#FECB52"],[1.0,"#FECB52"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.88<br>ISO-code=%{location}<extra></extra>","hovertext":["Estonia","Nauru"],"locations":["EST","NRU"],"name":"0.88","showlegend":true,"showscale":false,"z":[1,1],"type":"choropleth"},{"colorscale":[[0.0,"#636efa"],[1.0,"#636efa"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.86<br>ISO-code=%{location}<extra></extra>","hovertext":["Hong Kong","Latvia","Lithuania","Russia","Ukraine"],"locations":["HKG","LVA","LTU","RUS","UKR"],"name":"0.86","showlegend":true,"showscale":false,"z":[1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#EF553B"],[1.0,"#EF553B"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=0.91<br>ISO-code=%{location}<extra></extra>","hovertext":["Hungary","Kazakhstan"],"locations":["HUN","KAZ"],"name":"0.91","showlegend":true,"showscale":false,"z":[1,1],"type":"choropleth"},{"colorscale":[[0.0,"#00cc96"],[1.0,"#00cc96"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=1.11<br>ISO-code=%{location}<extra></extra>","hovertext":["Jordan"],"locations":["JOR"],"name":"1.11","showlegend":true,"showscale":false,"z":[1],"type":"choropleth"},{"colorscale":[[0.0,"#ab63fa"],[1.0,"#ab63fa"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=1.13<br>ISO-code=%{location}<extra></extra>","hovertext":["Maldives","Northern Mariana Islands"],"locations":["MDV","MNP"],"name":"1.13","showlegend":true,"showscale":false,"z":[1,1],"type":"choropleth"},{"colorscale":[[0.0,"#FFA15A"],[1.0,"#FFA15A"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=1.18<br>ISO-code=%{location}<extra></extra>","hovertext":["Oman"],"locations":["OMN"],"name":"1.18","showlegend":true,"showscale":false,"z":[1],"type":"choropleth"},{"colorscale":[[0.0,"#19d3f3"],[1.0,"#19d3f3"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=1.04<br>ISO-code=%{location}<extra></extra>","hovertext":["Pakistan","Papua New Guinea","Saint Vincent and the Grenadines","Samoa","Solomon Islands","Wallis and Futuna"],"locations":["PAK","PNG","VCT","WSM","SLB","WLF"],"name":"1.04","showlegend":true,"showscale":false,"z":[1,1,1,1,1,1],"type":"choropleth"},{"colorscale":[[0.0,"#FF6692"],[1.0,"#FF6692"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=1.07<br>ISO-code=%{location}<extra></extra>","hovertext":["Palau","Seychelles"],"locations":["PLW","SYC"],"name":"1.07","showlegend":true,"showscale":false,"z":[1,1],"type":"choropleth"},{"colorscale":[[0.0,"#B6E880"],[1.0,"#B6E880"]],"geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>Sex-Ratio=1.3<br>ISO-code=%{location}<extra></extra>","hovertext":["Saudi Arabia"],"locations":["SAU"],"name":"1.3","showlegend":true,"showscale":false,"z":[1],"type":"choropleth"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"geo":{"domain":{"x":[0.0,1.0],"y":[0.0,1.0]},"projection":{"type":"orthographic"},"center":{}},"legend":{"title":{"text":"Sex-Ratio"},"tracegroupgap":0},"margin":{"t":60},"title":{"text":"Sex-Ratio per country","y":0.95,"x":0.5,"xanchor":"center","yanchor":"top"}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('0c31d511-6455-41ed-b031-3db95bfc0464');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                            </script>        </div>


</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>